import{n as V,i as kt,a as Bt,l as St,c as Rt,d as Vt,r as pt,t as Z,b as J,e as dt,S as vt,f as Mt,s as ot,g as A,h as H,j as st,k as P,m as S,o as Ht,p as $,q as G,u as rt,v as F,w as _t,x as M,y as lt,z as et,A as ut,B as at,C as ct,D as Pt,_ as Tt,E as D,F as At,G as qt,H as mt}from"./index-d2c516e0.js";function Dt(e,t,n,s){if(!t)return V;const o=e.getBoundingClientRect();if(t.left===o.left&&t.right===o.right&&t.top===o.top&&t.bottom===o.bottom)return V;const{delay:r=0,duration:i=300,easing:u=kt,start:a=Bt()+r,end:d=a+i,tick:l=V,css:g}=n(e,{from:t,to:o},s);let p=!0,w=!1,h;function c(){g&&(h=Rt(e,0,1,i,r,u,g)),r||(w=!0)}function b(){g&&Vt(e,h),p=!1}return St(C=>{if(!w&&C>=a&&(w=!0),w&&C>=d&&(l(1,0),b()),!p)return!1;if(w){const k=C-a,q=0+1*u(k/i);l(q,1-q)}return!0}),c(),l(0,1),b}function Et(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:s}=t,o=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=s,Lt(e,o)}}function Lt(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const s=getComputedStyle(e),o=s.transform==="none"?"":s.transform;e.style.transform=`${o} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}function bt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Nt(e,t){J(e,1,1,()=>{t.delete(e.key)})}function Ot(e,t){e.f(),Nt(e,t)}function zt(e,t,n,s,o,r,i,u,a,d,l,g){let p=e.length,w=r.length,h=p;const c={};for(;h--;)c[e[h].key]=h;const b=[],C=new Map,k=new Map,q=[];for(h=w;h--;){const v=g(o,r,h),B=n(v);let _=i.get(B);_?s&&q.push(()=>_.p(v,t)):(_=d(B,v),_.c()),C.set(B,b[h]=_),B in c&&k.set(B,Math.abs(h-c[B]))}const O=new Set,R=new Set;function z(v){Z(v,1),v.m(u,l),i.set(v.key,v),l=v.first,w--}for(;p&&w;){const v=b[w-1],B=e[p-1],_=v.key,L=B.key;v===B?(l=v.first,p--,w--):C.has(L)?!i.has(_)||O.has(_)?z(v):R.has(L)?p--:k.get(_)>k.get(L)?(R.add(_),z(v)):(O.add(L),p--):(a(B,i),p--)}for(;p--;){const v=e[p];C.has(v.key)||a(v,i)}for(;w;)z(b[w-1]);return pt(q),b}function Gt(e){const t=e-1;return t*t*t+1}function It(e,{delay:t=0,duration:n=400,easing:s=kt}={}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:s,css:r=>`opacity: ${r*o}`}}function Yt(e,{from:t,to:n},s={}){const o=getComputedStyle(e),r=o.transform==="none"?"":o.transform,[i,u]=o.transformOrigin.split(" ").map(parseFloat),a=t.left+t.width*i/n.width-(n.left+i),d=t.top+t.height*u/n.height-(n.top+u),{delay:l=0,duration:g=w=>Math.sqrt(w)*120,easing:p=Gt}=s;return{delay:l,duration:dt(g)?g(Math.sqrt(a*a+d*d)):g,easing:p,css:(w,h)=>{const c=h*a,b=h*d,C=w+h*t.width/n.width,k=w+h*t.height/n.height;return`transform: ${r} translate(${c}px, ${b}px) scale(${C}, ${k});`}}}function jt(e){let t;return{c(){t=S("Reset")},m(n,s){H(n,t,s)},d(n){n&&P(t)}}}function Ft(e){let t;return{c(){t=S("Play again")},m(n,s){H(n,t,s)},d(n){n&&P(t)}}}function Zt(e){let t,n,s;function o(u,a){return u[1]?Ft:jt}let r=o(e),i=r(e);return{c(){t=A("button"),i.c()},m(u,a){H(u,t,a),i.m(t,null),n||(s=st(t,"click",function(){dt(e[0])&&e[0].apply(this,arguments)}),n=!0)},p(u,[a]){e=u,r!==(r=o(e))&&(i.d(1),i=r(e),i&&(i.c(),i.m(t,null)))},i:V,o:V,d(u){u&&P(t),i.d(),n=!1,s()}}}function Jt(e,t,n){let{reset:s}=t,{isCorrect:o}=t;return e.$$set=r=>{"reset"in r&&n(0,s=r.reset),"isCorrect"in r&&n(1,o=r.isCorrect)},[s,o]}class Kt extends vt{constructor(t){super(),Mt(this,t,Jt,Zt,ot,{reset:0,isCorrect:1})}}const Q=[];function Qt(e,t){return{subscribe:I(e,t).subscribe}}function I(e,t=V){let n;const s=new Set;function o(u){if(ot(e,u)&&(e=u,n)){const a=!Q.length;for(const d of s)d[1](),Q.push(d,e);if(a){for(let d=0;d<Q.length;d+=2)Q[d][0](Q[d+1]);Q.length=0}}}function r(u){o(u(e))}function i(u,a=V){const d=[u,a];return s.add(d),s.size===1&&(n=t(o,r)||V),u(e),()=>{s.delete(d),s.size===0&&n&&(n(),n=null)}}return{set:o,update:r,subscribe:i}}function x(e,t,n){const s=!Array.isArray(e),o=s?[e]:e;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=t.length<2;return Qt(n,(i,u)=>{let a=!1;const d=[];let l=0,g=V;const p=()=>{if(l)return;g();const h=t(s?d[0]:d,i,u);r?i(h):g=dt(h)?h:V},w=o.map((h,c)=>Ht(h,b=>{d[c]=b,l&=~(1<<c),a&&p()},()=>{l|=1<<c}));return a=!0,p(),function(){pt(w),g(),a=!1}})}function ft(e){const t=Math.random()*e,n=Math.floor(t);return n===0?ft(e):n}function tt(e){return new Array(e).fill(0)}function Ut(e,t){if(e<0||t<=0)throw new Error("Number must be non-negative and length must be greater than 0.");let n=e.toString(2);for(;n.length<t;)n="0"+n;return n.split("").map(Number)}function Wt(e){return e.reduce((t,n,s)=>{const o=n===1?Math.pow(2,e.length-1-s):0;return t+o},0)}function Xt(e){const t=Math.random()*e;return Math.floor(t)}const $t=e=>{const t=I(e),n=I(!0),s=I(tt(e)),o=I(e),r=I(e),i=I(ft(Math.pow(2,e))),u=I(tt(e)),a=x(t,c=>tt(c).map((b,C)=>c-1-C)),d=x(s,c=>Wt(c)),l=x([i,d],([c,b])=>c===b),g=x([s,i],([c,b])=>Ut(b,c.length)),p=x(r,c=>c===0),w=()=>{const c=$(u),b=$(s),C=Xt(b.length);if(c[C]){w();return}r.update(k=>k-1),u.update(k=>(k[C]=1,k)),o.update(k=>k+1),s.update(k=>(k[C]=$(g)[C],k))},h=()=>{const c=$(t);r.set(c),u.set(tt(c)),i.set(ft(Math.pow(2,c))),o.set(0),s.set(tt(c))};return{displayBits:n,powersCount:t,answers:s,movesCount:o,hintsLeft:r,hints:u,isCorrect:l,currentValue:d,powers:a,binarySolution:g,goal:i,noHintsLeft:p,toggleDisplayBits:()=>{n.update(c=>!c)},reset:h,giveHint:w,tryToggle:c=>{const b=$(s).length-1-c;o.update(C=>C+1),s.update(C=>(C[b]=C[b]===0?1:0,C))},setPowersCount:c=>{t.set(c),h()}}},U=$t(8);function yt(e,t,n){const s=e.slice();return s[27]=t[n],s[29]=n,s}function xt(e){let t,n,s,o,r;return{c(){t=S("Your goal is "),n=A("b"),s=S(e[1]),o=S(", but you got: "),r=S(e[0])},m(i,u){H(i,t,u),H(i,n,u),M(n,s),H(i,o,u),H(i,r,u)},p(i,u){u&2&&et(s,i[1]),u&1&&et(r,i[0])},d(i){i&&(P(t),P(n),P(o),P(r))}}}function te(e){let t;return{c(){t=S("ðŸš€ You won! âœ…")},m(n,s){H(n,t,s)},p:V,d(n){n&&P(t)}}}function ee(e){let t;return{c(){t=S("You used all of hints!")},m(n,s){H(n,t,s)},p:V,d(n){n&&P(t)}}}function wt(e){let t,n;function s(i,u){return i[7]?ee:i[3]?te:xt}let o=s(e),r=o(e);return{c(){t=A("h1"),r.c()},m(i,u){H(i,t,u),r.m(t,null)},p(i,u){o===(o=s(i))&&r?r.p(i,u):(r.d(1),r=o(i),r&&(r.c(),r.m(t,null)))},i(i){i&&(n||At(()=>{n=qt(t,It,{}),n.start()}))},o:V,d(i){i&&P(t),r.d()}}}function Ct(e,t){let n,s,o,r,i=V,u;var a=t[2];function d(l,g){return{props:{activeId:l[9][l[29]]?l[11][l[29]]:l[10][l[29]],isChecked:!!l[9][l[29]]||l[9][l[29]]!==l[10][l[29]],toggle:l[25],power:l[27],displayBits:l[6],isHintGiven:!!l[9][l[29]]}}}return a&&(s=mt(a,d(t))),{key:e,first:null,c(){n=A("div"),s&&rt(s.$$.fragment),o=G(),this.first=n},m(l,g){H(l,n,g),s&&lt(s,n,null),M(n,o),u=!0},p(l,g){if(t=l,g&4&&a!==(a=t[2])){if(s){ut();const p=s;J(p.$$.fragment,1,0,()=>{ct(p,1)}),at()}a?(s=mt(a,d(t)),rt(s.$$.fragment),Z(s.$$.fragment,1),lt(s,n,o)):s=null}else if(a){const p={};g&3840&&(p.activeId=t[9][t[29]]?t[11][t[29]]:t[10][t[29]]),g&1792&&(p.isChecked=!!t[9][t[29]]||t[9][t[29]]!==t[10][t[29]]),g&256&&(p.power=t[27]),g&64&&(p.displayBits=t[6]),g&768&&(p.isHintGiven=!!t[9][t[29]]),s.$set(p)}},r(){r=n.getBoundingClientRect()},f(){Et(n),i()},a(){i(),i=Dt(n,r,Yt,{})},i(l){u||(s&&Z(s.$$.fragment,l),u=!0)},o(l){s&&J(s.$$.fragment,l),u=!1},d(l){l&&P(n),s&&ct(s)}}}function ne(e){let t,n,s,o,r,i,u,a,d,l,g,p,w,h,c,b,C,k=e[6]?"powers":"bits",q,O,R,z=e[3]||e[7]||e[1],v,B,_=[],L=new Map,W,Y,nt,m,K,T,it,ht;a=new Kt({props:{reset:U.reset,isCorrect:e[3]}});let E=wt(e),X=bt(e[8]);const gt=f=>f[29];for(let f=0;f<X.length;f+=1){let y=yt(e,X,f),N=gt(y);L.set(N,_[f]=Ct(N,y))}return{c(){t=A("header"),n=A("label"),n.textContent="Powers count",s=G(),o=A("input"),r=G(),i=A("br"),u=G(),rt(a.$$.fragment),d=G(),l=A("button"),g=S("Give a hint ("),p=S(e[5]),w=S(")"),c=G(),b=A("button"),C=S(`Display
    `),q=S(k),O=G(),R=A("main"),E.c(),v=G(),B=A("div");for(let f=0;f<_.length;f+=1)_[f].c();W=G(),Y=A("h1"),nt=S("You made "),m=S(e[12]),K=S(" move/s"),F(n,"for","powers-count"),F(o,"id","powers-count"),F(o,"type","number"),F(o,"class","powers-count"),o.value=e[4],F(o,"min","1"),F(o,"max","10"),l.disabled=h=e[5]<=0||e[3],F(B,"class","list"),_t(B,"won",e[3])},m(f,y){H(f,t,y),M(t,n),M(t,s),M(t,o),M(t,r),M(t,i),M(t,u),lt(a,t,null),M(t,d),M(t,l),M(l,g),M(l,p),M(l,w),M(t,c),M(t,b),M(b,C),M(b,q),H(f,O,y),H(f,R,y),E.m(R,null),M(R,v),M(R,B);for(let N=0;N<_.length;N+=1)_[N]&&_[N].m(B,null);M(R,W),M(R,Y),M(Y,nt),M(Y,m),M(Y,K),T=!0,it||(ht=[st(o,"input",e[26]),st(l,"click",U.giveHint),st(b,"click",U.toggleDisplayBits)],it=!0)},p(f,[y]){(!T||y&16&&o.value!==f[4])&&(o.value=f[4]);const N={};if(y&8&&(N.isCorrect=f[3]),a.$set(N),(!T||y&32)&&et(p,f[5]),(!T||y&40&&h!==(h=f[5]<=0||f[3]))&&(l.disabled=h),(!T||y&64)&&k!==(k=f[6]?"powers":"bits")&&et(q,k),y&138&&ot(z,z=f[3]||f[7]||f[1])?(ut(),J(E,1,1,V),at(),E=wt(f),E.c(),Z(E,1),E.m(R,v)):E.p(f,y),y&33558340){X=bt(f[8]),ut();for(let j=0;j<_.length;j+=1)_[j].r();_=zt(_,y,gt,1,f,X,L,B,Ot,Ct,null,yt);for(let j=0;j<_.length;j+=1)_[j].a();at()}(!T||y&8)&&_t(B,"won",f[3]),(!T||y&4096)&&et(m,f[12])},i(f){if(!T){Z(a.$$.fragment,f),Z(E);for(let y=0;y<X.length;y+=1)Z(_[y]);T=!0}},o(f){J(a.$$.fragment,f),J(E);for(let y=0;y<_.length;y+=1)J(_[y]);T=!1},d(f){f&&(P(t),P(O),P(R)),ct(a),E.d(f);for(let y=0;y<_.length;y+=1)_[y].d();it=!1,pt(ht)}}}function se(e,t,n){let s,o,r,i,u,a,d,l,g,p,w,h,c;Pt(async()=>{n(2,c=(await Tt(()=>import("./ValueButton-58aa10f9.js"),["assets/ValueButton-58aa10f9.js","assets/index-d2c516e0.js","assets/index-2f0c1568.css","assets/ValueButton-80b64318.css"])).default)});const{isCorrect:b,currentValue:C,powers:k,binarySolution:q,goal:O,powersCount:R,displayBits:z,noHintsLeft:v,answers:B,movesCount:_,hintsLeft:L,hints:W}=U;D(e,b,m=>n(3,s=m)),D(e,C,m=>n(0,o=m)),D(e,k,m=>n(8,l=m)),D(e,q,m=>n(11,w=m)),D(e,O,m=>n(1,r=m)),D(e,R,m=>n(4,i=m)),D(e,z,m=>n(6,a=m)),D(e,v,m=>n(7,d=m)),D(e,B,m=>n(10,p=m)),D(e,_,m=>n(12,h=m)),D(e,L,m=>n(5,u=m)),D(e,W,m=>n(9,g=m));function Y(m){const K=Number(m.currentTarget.dataset.power);s||U.tryToggle(K)}function nt(m){const K=m.target,T=Number(K.value);T<1||U.setPowersCount(T)}return e.$$.update=()=>{e.$$.dirty&3&&(document.title=`cplx:  ${r}: ${o} | complexity game`)},[o,r,c,s,i,u,a,d,l,g,p,w,h,b,C,k,q,O,R,z,v,B,_,L,W,Y,nt]}class oe extends vt{constructor(t){super(),Mt(this,t,se,ne,ot,{})}}const re=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{re as M,It as f};
